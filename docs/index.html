<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petfinder Scraper API Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
            padding: 2rem;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 3rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: #2d3748;
            border-bottom: 3px solid #667eea;
            padding-bottom: 1rem;
        }
        h2 {
            font-size: 1.8rem;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            color: #4a5568;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
        }
        h3 {
            font-size: 1.4rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: #2d3748;
        }
        p {
            margin-bottom: 1rem;
            color: #4a5568;
        }
        .intro {
            font-size: 1.1rem;
            color: #718096;
            margin-bottom: 2rem;
        }
        code {
            background: #f7fafc;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #e53e3e;
        }
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-size: 0.9rem;
        }
        pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }
        tr:hover {
            background: #f7fafc;
        }
        .endpoint {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border-left: 4px solid #667eea;
        }
        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .method {
            background: #48bb78;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .method.get {
            background: #4299e1;
        }
        .method.post {
            background: #48bb78;
        }
        .path {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            color: #2d3748;
            font-weight: 600;
        }
        .auth-badge {
            display: inline-block;
            background: #fbbf24;
            color: #78350f;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }
        .no-auth-badge {
            display: inline-block;
            background: #48bb78;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }
        .note {
            background: #edf2f7;
            border-left: 4px solid #4299e1;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        .note strong {
            color: #2d3748;
        }
        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }
        li {
            margin-bottom: 0.5rem;
            color: #4a5568;
        }
        .status-code {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.85rem;
        }
        .status-200 {
            background: #c6f6d5;
            color: #22543d;
        }
        .status-401 {
            background: #fed7d7;
            color: #742a2a;
        }
        .status-500 {
            background: #feebc8;
            color: #7c2d12;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Petfinder Scraper API Documentation</h1>
        <p class="intro">Welcome to the Petfinder Scraper API documentation. This API provides access to a continuously updated database of adoptable pets from Petfinder.</p>

        <h2>Authentication</h2>
        <p>The pets endpoint requires authentication using an endpoint key. The key can be provided in two ways:</p>
        <ul>
            <li><strong>Query Parameter:</strong> <code>?key=YOUR_KEY</code></li>
            <li><strong>Header:</strong> <code>X-API-Key: YOUR_KEY</code></li>
        </ul>
        <div class="note">
            <strong>Note:</strong> The endpoint key is stored securely on the server and is required for accessing pet data.
        </div>

        <h2>API Endpoints</h2>

        <div class="endpoint">
            <div class="endpoint-header">
                <span class="method get">GET</span>
                <span class="path">/</span>
                <span class="no-auth-badge">No Auth</span>
            </div>
            <h3>Health Check</h3>
            <p>Check if the server is running and healthy.</p>
            
            <h4>Response:</h4>
            <pre><code>{
  "status": "running",
  "message": "Petfinder Scraper Server"
}</code></pre>

            <h4>Example Request:</h4>
            <pre><code>curl https://petfinder-database-distributor.onrender.com/</code></pre>

            <h4>Response Codes:</h4>
            <ul>
                <li><span class="status-code status-200">200 OK</span> - Server is running</li>
            </ul>
        </div>

        <div class="endpoint">
            <div class="endpoint-header">
                <span class="method get">GET</span>
                <span class="path">/rate</span>
                <span class="no-auth-badge">No Auth</span>
            </div>
            <h3>Get Scraping Rate</h3>
            <p>Get the rate of pet retrieval in the past 15 minutes. Calculated as the number of pets scraped in the last 15 minutes divided by 15.</p>
            
            <h4>Response:</h4>
            <pre><code>{
  "rate": 2.5,
  "pets_in_last_15_minutes": 38,
  "unit": "pets per minute"
}</code></pre>

            <h4>Example Request:</h4>
            <pre><code>curl https://petfinder-database-distributor.onrender.com/rate</code></pre>

            <h4>Response Codes:</h4>
            <ul>
                <li><span class="status-code status-200">200 OK</span> - Successfully retrieved rate</li>
            </ul>
        </div>

        <div class="endpoint">
            <div class="endpoint-header">
                <span class="method get">GET</span>
                <span class="path">/pets.csv</span>
                <span class="auth-badge">Auth Required</span>
            </div>
            <h3>Get All Pets (CSV)</h3>
            <p>Download all pets from the database as a CSV file. This endpoint requires authentication.</p>
            
            <h4>Query Parameters:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>key</code></td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>Your endpoint key for authentication</td>
                    </tr>
                </tbody>
            </table>

            <h4>Headers:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Header</th>
                        <th>Value</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>X-API-Key</code></td>
                        <td><code>YOUR_KEY</code></td>
                        <td>Alternative way to provide authentication</td>
                    </tr>
                </tbody>
            </table>

            <h4>Response:</h4>
            <ul>
                <li><strong>Content-Type:</strong> <code>text/csv</code></li>
                <li><strong>Content-Disposition:</strong> <code>attachment; filename=pets.csv</code></li>
                <li><strong>Body:</strong> CSV file containing all pet records</li>
            </ul>

            <h4>Example Requests:</h4>
            <p>Using query parameter:</p>
            <pre><code>curl "https://petfinder-database-distributor.onrender.com/pets.csv?key=YOUR_KEY" -o pets.csv</code></pre>

            <p>Using header:</p>
            <pre><code>curl -H "X-API-Key: YOUR_KEY" \
     https://petfinder-database-distributor.onrender.com/pets.csv \
     -o pets.csv</code></pre>

            <h4>Response Codes:</h4>
            <ul>
                <li><span class="status-code status-200">200 OK</span> - Successfully retrieved pets data</li>
                <li><span class="status-code status-401">401 Unauthorized</span> - Invalid or missing endpoint key</li>
                <li><span class="status-code status-500">500 Internal Server Error</span> - Server error while reading data</li>
            </ul>
        </div>

        <h2>CSV File Format</h2>
        <p>The pets CSV file contains the following columns:</p>
        <table>
            <thead>
                <tr>
                    <th>Column</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>link</code></td>
                    <td>string</td>
                    <td>URL to the pet's Petfinder page</td>
                </tr>
                <tr>
                    <td><code>pet_type</code></td>
                    <td>string</td>
                    <td>Type of pet: <code>"dog"</code> or <code>"cat"</code></td>
                </tr>
                <tr>
                    <td><code>name</code></td>
                    <td>string</td>
                    <td>Pet's name</td>
                </tr>
                <tr>
                    <td><code>location</code></td>
                    <td>string</td>
                    <td>Pet's location</td>
                </tr>
                <tr>
                    <td><code>age</code></td>
                    <td>string</td>
                    <td>Pet's age (e.g., "Adult", "Young", "Senior")</td>
                </tr>
                <tr>
                    <td><code>gender</code></td>
                    <td>string</td>
                    <td>Pet's gender (e.g., "Male", "Female")</td>
                </tr>
                <tr>
                    <td><code>size</code></td>
                    <td>string</td>
                    <td>Pet's size (e.g., "Large", "Medium", "Small")</td>
                </tr>
                <tr>
                    <td><code>color</code></td>
                    <td>string</td>
                    <td>Pet's color/coloring</td>
                </tr>
                <tr>
                    <td><code>breed</code></td>
                    <td>string</td>
                    <td>Pet's breed</td>
                </tr>
                <tr>
                    <td><code>spayed_neutered</code></td>
                    <td>string</td>
                    <td>Whether the pet is spayed/neutered: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>vaccinated</code></td>
                    <td>string</td>
                    <td>Whether the pet is vaccinated: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>special_needs</code></td>
                    <td>string</td>
                    <td>Whether the pet has special needs: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>kids_compatible</code></td>
                    <td>string</td>
                    <td>Whether the pet is compatible with kids: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>dogs_compatible</code></td>
                    <td>string</td>
                    <td>Whether the pet is compatible with dogs: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>cats_compatible</code></td>
                    <td>string</td>
                    <td>Whether the pet is compatible with cats: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>about_me</code></td>
                    <td>string</td>
                    <td>Description of the pet (newlines replaced with <code>\n</code>)</td>
                </tr>
                <tr>
                    <td><code>image</code></td>
                    <td>string</td>
                    <td>URL to the pet's image</td>
                </tr>
            </tbody>
        </table>
        <div class="note">
            <strong>Note:</strong> Boolean values are stored as strings (<code>"True"</code> or <code>"False"</code>). The <code>about_me</code> field may contain escaped newline characters (<code>\n</code>) to keep the CSV format valid.
        </div>

        <h2>Error Codes</h2>
        <table>
            <thead>
                <tr>
                    <th>Status Code</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="status-code status-200">200 OK</span></td>
                    <td>Request successful</td>
                </tr>
                <tr>
                    <td><span class="status-code status-401">401 Unauthorized</span></td>
                    <td>Invalid or missing endpoint key</td>
                </tr>
                <tr>
                    <td><span class="status-code status-500">500 Internal Server Error</span></td>
                    <td>Server error occurred</td>
                </tr>
            </tbody>
        </table>

        <h2>Data Updates</h2>
        <p>The database is continuously updated by scraping Petfinder search pages. The scraper:</p>
        <ul>
            <li>Scrapes pages 1-10,000 for both dogs and cats</li>
            <li>Verifies all entries periodically to remove invalid links</li>
            <li>Prevents duplicate entries by checking pet links</li>
            <li>Updates the CSV file in real-time</li>
        </ul>

        <h2>Example Usage</h2>

        <h3>Python</h3>
        <pre><code>import requests

# Your endpoint key
API_KEY = "your-endpoint-key-here"
BASE_URL = "https://petfinder-database-distributor.onrender.com"

# Health check
response = requests.get(f"{BASE_URL}/")
print(response.json())

# Get scraping rate
response = requests.get(f"{BASE_URL}/rate")
print(response.json())

# Get pets CSV
response = requests.get(
    f"{BASE_URL}/pets.csv",
    params={"key": API_KEY}
)

if response.status_code == 200:
    with open("pets.csv", "wb") as f:
        f.write(response.content)
    print("Successfully downloaded pets.csv")
else:
    print(f"Error: {response.status_code}")
    print(response.text)</code></pre>

        <h3>JavaScript/Node.js</h3>
        <pre><code>const https = require('https');
const fs = require('fs');

const API_KEY = 'your-endpoint-key-here';
const BASE_URL = 'petfinder-database-distributor.onrender.com';

// Get scraping rate
https.get(`https://${BASE_URL}/rate`, (res) => {
  let data = '';
  res.on('data', (chunk) => { data += chunk; });
  res.on('end', () => {
    console.log(JSON.parse(data));
  });
});

// Get pets CSV
const options = {
  hostname: BASE_URL,
  path: `/pets.csv?key=${API_KEY}`,
  method: 'GET'
};

const req = https.request(options, (res) => {
  if (res.statusCode === 200) {
    const file = fs.createWriteStream('pets.csv');
    res.pipe(file);
    file.on('finish', () => {
      file.close();
      console.log('Successfully downloaded pets.csv');
    });
  } else {
    console.error(`Error: ${res.statusCode}`);
  }
});

req.on('error', (e) => {
  console.error(`Problem with request: ${e.message}`);
});

req.end();</code></pre>

        <div class="note" style="margin-top: 2rem; text-align: center;">
            <strong>Last Updated:</strong> January 2026
        </div>
    </div>
</body>
</html>
