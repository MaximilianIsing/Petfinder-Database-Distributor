<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petfinder Scraper API Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
            padding: 2rem;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 3rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: #2d3748;
            border-bottom: 3px solid #667eea;
            padding-bottom: 1rem;
        }
        h2 {
            font-size: 1.8rem;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            color: #4a5568;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
        }
        h3 {
            font-size: 1.4rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #4a5568;
        }
        p {
            margin-bottom: 1rem;
            color: #4a5568;
        }
        hr {
            border: none;
            border-top: 1px solid #e2e8f0;
            margin: 2rem 0;
        }
        code {
            background: #f7fafc;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #e53e3e;
        }
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }
        pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: white;
        }
        th {
            background: #667eea;
            color: white;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
        }
        td {
            padding: 0.75rem;
            border-bottom: 1px solid #e2e8f0;
        }
        tr:hover {
            background: #f7fafc;
        }
        blockquote {
            border-left: 4px solid #667eea;
            padding-left: 1rem;
            margin: 1rem 0;
            color: #4a5568;
            font-style: italic;
        }
        .endpoint {
            background: #f7fafc;
            padding: 1rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border-left: 4px solid #667eea;
        }
        .endpoint-method {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9em;
            margin-right: 0.5rem;
        }
        .endpoint-path {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            color: #2d3748;
        }
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 0.5rem;
        }
        .badge-required {
            background: #fc8181;
            color: white;
        }
        .badge-optional {
            background: #cbd5e0;
            color: #2d3748;
        }
        .footer {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #e2e8f0;
            text-align: center;
            color: #718096;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Petfinder Scraper API Documentation</h1>
        <p>Welcome to the Petfinder Scraper API documentation. This API provides access to a continuously updated database of adoptable pets from Petfinder.</p>

        <hr>

        <h2>Authentication</h2>
        <p>The pets endpoint requires authentication using an endpoint key. The key can be provided in two ways:</p>
        <ul style="margin-left: 2rem; margin-bottom: 1rem;">
            <li><strong>Query Parameter:</strong> <code>?key=YOUR_KEY</code></li>
            <li><strong>Header:</strong> <code>X-API-Key: YOUR_KEY</code></li>
        </ul>
        <blockquote>
            <strong>Note:</strong> The endpoint key is stored securely on the server and is required for accessing pet data.
        </blockquote>

        <hr>

        <h2>API Endpoints</h2>

        <div class="endpoint">
            <h3>
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/</span>
            </h3>
            <p><strong>Health Check</strong></p>
            <p>Check if the server is running and healthy.</p>
            
            <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Response:</h4>
            <pre><code>{
  "status": "running",
  "message": "Petfinder Scraper Server"
}</code></pre>

            <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Example Request:</h4>
            <pre><code>curl https://petfinder-database-distributor.onrender.com/</code></pre>

            <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Response Codes:</h4>
            <ul style="margin-left: 2rem;">
                <li><code>200 OK</code> - Server is running</li>
            </ul>
        </div>

        <div class="endpoint">
            <h3>
                <span class="endpoint-method">GET</span>
                <span class="endpoint-path">/pets.csv</span>
            </h3>
            <p><strong>Get All Pets (CSV)</strong></p>
            <p>Download all pets from the database as a CSV file. This endpoint requires authentication.</p>
            
            <p><strong>Authentication:</strong> Required (endpoint key)</p>

            <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Query Parameters:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>key</code></td>
                        <td>string</td>
                        <td><span class="badge badge-required">Yes</span></td>
                        <td>Your endpoint key for authentication</td>
                    </tr>
                </tbody>
            </table>

            <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Headers:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Header</th>
                        <th>Value</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>X-API-Key</code></td>
                        <td><code>YOUR_KEY</code></td>
                        <td>Alternative way to provide authentication</td>
                    </tr>
                </tbody>
            </table>

            <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Response:</h4>
            <ul style="margin-left: 2rem; margin-bottom: 1rem;">
                <li><strong>Content-Type:</strong> <code>text/csv</code></li>
                <li><strong>Content-Disposition:</strong> <code>attachment; filename=pets.csv</code></li>
                <li><strong>Body:</strong> CSV file containing all pet records</li>
            </ul>

            <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Example Requests:</h4>
            <p>Using query parameter:</p>
            <pre><code>curl "https://petfinder-database-distributor.onrender.com/pets.csv?key=YOUR_KEY" -o pets.csv</code></pre>

            <p>Using header:</p>
            <pre><code>curl -H "X-API-Key: YOUR_KEY" \
     https://petfinder-database-distributor.onrender.com/pets.csv \
     -o pets.csv</code></pre>

            <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Response Codes:</h4>
            <ul style="margin-left: 2rem;">
                <li><code>200 OK</code> - Successfully retrieved pets data</li>
                <li><code>401 Unauthorized</code> - Invalid or missing endpoint key</li>
                <li><code>500 Internal Server Error</code> - Server error while reading data</li>
            </ul>
        </div>

        <hr>

        <h2>CSV File Format</h2>
        <p>The pets CSV file contains the following columns:</p>
        <table>
            <thead>
                <tr>
                    <th>Column</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>link</code></td>
                    <td>string</td>
                    <td>URL to the pet's Petfinder page</td>
                </tr>
                <tr>
                    <td><code>pet_type</code></td>
                    <td>string</td>
                    <td>Type of pet: <code>"dog"</code> or <code>"cat"</code></td>
                </tr>
                <tr>
                    <td><code>name</code></td>
                    <td>string</td>
                    <td>Pet's name</td>
                </tr>
                <tr>
                    <td><code>location</code></td>
                    <td>string</td>
                    <td>Pet's location</td>
                </tr>
                <tr>
                    <td><code>age</code></td>
                    <td>string</td>
                    <td>Pet's age (e.g., "Adult", "Young", "Senior")</td>
                </tr>
                <tr>
                    <td><code>gender</code></td>
                    <td>string</td>
                    <td>Pet's gender (e.g., "Male", "Female")</td>
                </tr>
                <tr>
                    <td><code>size</code></td>
                    <td>string</td>
                    <td>Pet's size (e.g., "Large", "Medium", "Small")</td>
                </tr>
                <tr>
                    <td><code>color</code></td>
                    <td>string</td>
                    <td>Pet's color/coloring</td>
                </tr>
                <tr>
                    <td><code>breed</code></td>
                    <td>string</td>
                    <td>Pet's breed</td>
                </tr>
                <tr>
                    <td><code>spayed_neutered</code></td>
                    <td>string</td>
                    <td>Whether the pet is spayed/neutered: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>vaccinated</code></td>
                    <td>string</td>
                    <td>Whether the pet is vaccinated: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>special_needs</code></td>
                    <td>string</td>
                    <td>Whether the pet has special needs: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>kids_compatible</code></td>
                    <td>string</td>
                    <td>Whether the pet is compatible with kids: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>dogs_compatible</code></td>
                    <td>string</td>
                    <td>Whether the pet is compatible with dogs: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>cats_compatible</code></td>
                    <td>string</td>
                    <td>Whether the pet is compatible with cats: <code>"True"</code> or <code>"False"</code></td>
                </tr>
                <tr>
                    <td><code>about_me</code></td>
                    <td>string</td>
                    <td>Description of the pet (newlines replaced with <code>\n</code>)</td>
                </tr>
                <tr>
                    <td><code>image</code></td>
                    <td>string</td>
                    <td>URL to the pet's image</td>
                </tr>
            </tbody>
        </table>
        <blockquote>
            <strong>Note:</strong> Boolean values are stored as strings (<code>"True"</code> or <code>"False"</code>). The <code>about_me</code> field may contain escaped newline characters (<code>\n</code>) to keep the CSV format valid.
        </blockquote>

        <hr>

        <h2>Error Codes</h2>
        <table>
            <thead>
                <tr>
                    <th>Status Code</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>200 OK</code></td>
                    <td>Request successful</td>
                </tr>
                <tr>
                    <td><code>401 Unauthorized</code></td>
                    <td>Invalid or missing endpoint key</td>
                </tr>
                <tr>
                    <td><code>500 Internal Server Error</code></td>
                    <td>Server error occurred</td>
                </tr>
            </tbody>
        </table>

        <hr>

        <h2>Data Updates</h2>
        <p>The database is continuously updated by scraping Petfinder search pages. The scraper:</p>
        <ul style="margin-left: 2rem; margin-bottom: 1rem;">
            <li>Scrapes pages 1-10,000 for both dogs and cats</li>
            <li>Verifies all entries periodically to remove invalid links</li>
            <li>Prevents duplicate entries by checking pet links</li>
            <li>Updates the CSV file in real-time</li>
        </ul>

        <hr>

        <h2>Example Usage</h2>

        <h3>Python</h3>
        <pre><code>import requests

# Your endpoint key
API_KEY = "your-endpoint-key-here"
BASE_URL = "https://petfinder-database-distributor.onrender.com"

# Health check
response = requests.get(f"{BASE_URL}/")
print(response.json())

# Get pets CSV
response = requests.get(
    f"{BASE_URL}/pets.csv",
    params={"key": API_KEY}
)

if response.status_code == 200:
    with open("pets.csv", "wb") as f:
        f.write(response.content)
    print("Successfully downloaded pets.csv")
else:
    print(f"Error: {response.status_code}")
    print(response.text)</code></pre>

        <h3>JavaScript/Node.js</h3>
        <pre><code>const https = require('https');
const fs = require('fs');

const API_KEY = 'your-endpoint-key-here';
const BASE_URL = 'petfinder-database-distributor.onrender.com';

// Get pets CSV
const options = {
  hostname: BASE_URL,
  path: `/pets.csv?key=${API_KEY}`,
  method: 'GET'
};

const req = https.request(options, (res) => {
  if (res.statusCode === 200) {
    const file = fs.createWriteStream('pets.csv');
    res.pipe(file);
    file.on('finish', () => {
      file.close();
      console.log('Successfully downloaded pets.csv');
    });
  } else {
    console.error(`Error: ${res.statusCode}`);
  }
});

req.on('error', (e) => {
  console.error(`Problem with request: ${e.message}`);
});

req.end();</code></pre>

        <div class="footer">
            <p><strong>Last Updated:</strong> January 2026</p>
        </div>
    </div>
</body>
</html>
